<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Video processing - MXF - PARADISEC Workflows</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Video processing - MXF | PARADISEC Workflows</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Video processing - MXF" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="PARADISEC technical workflows and archiving guides" /> <meta property="og:description" content="PARADISEC technical workflows and archiving guides" /> <link rel="canonical" href="http://localhost:4000/04_video_processing_MXF.html" /> <meta property="og:url" content="http://localhost:4000/04_video_processing_MXF.html" /> <meta property="og:site_name" content="PARADISEC Workflows" /> <script type="application/ld+json"> {"description":"PARADISEC technical workflows and archiving guides","@type":"WebPage","url":"http://localhost:4000/04_video_processing_MXF.html","headline":"Video processing - MXF","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> PARADISEC Workflows </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="http://localhost:4000/02_getting-started.html" class="nav-list-link">Getting started with PARADISEC</a></li><li class="nav-list-item"><a href="http://localhost:4000/03_audio_digitising.html" class="nav-list-link">Audio Digitising</a></li><li class="nav-list-item active"><a href="http://localhost:4000/04_video_processing_MXF.html" class="nav-list-link active">Video processing - MXF</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search PARADISEC Workflows" aria-label="Search PARADISEC Workflows" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/paradisec-archive/PARADISEC_workflows" class="site-button" target="_blank" rel="noopener noreferrer" > PARADISEC Workflows on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <details closed=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#mxf" id="markdown-toc-mxf">MXF</a> <ol> <li><a href="#define-encoding-settings---making-an-encoding-preset" id="markdown-toc-define-encoding-settings---making-an-encoding-preset">Define Encoding Settings - Making an Encoding Preset</a></li> <li><a href="#preset-name-and-format" id="markdown-toc-preset-name-and-format">Preset name and format</a></li> <li><a href="#video-settings" id="markdown-toc-video-settings">Video settings</a></li> <li><a href="#audio-settings" id="markdown-toc-audio-settings">Audio settings</a></li> <li><a href="#the-remaining-settings" id="markdown-toc-the-remaining-settings">The remaining settings</a></li> <li><a href="#using-mediainfo-to-check-your-output-file-metadata" id="markdown-toc-using-mediainfo-to-check-your-output-file-metadata">Using MediaInfo to check your output file metadata</a></li> <li><a href="#using-an-mxf-player-to-check-the-quality-of-your-newly-created-file" id="markdown-toc-using-an-mxf-player-to-check-the-quality-of-your-newly-created-file">Using an MXF player to check the quality of your newly created file</a></li> <li><a href="#explanation-of-the-specifications-used-to-create-lossless-mxf" id="markdown-toc-explanation-of-the-specifications-used-to-create-lossless-mxf">Explanation of the Specifications used to create lossless MXF</a></li> </ol> </li> </ol> </details> <p align="center"> üöß This page is currently under construction, last edited on 2021-07-01 üöß </p> <h2 id="mxf"> <a href="#mxf" class="anchor-heading" aria-labelledby="mxf"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MXF </h2> <p><strong><em>This page outlines how to create lossless JPEG2000 .MXF videos using Adobe Media Encoder (CC 2018 or later). This is for digital-to-digital transcoding. Contact PARADISEC if you have analog material to digitise.</em></strong></p> <p><em><a href="https://paradisec.org">PARADISEC</a> adheres to the current best-practice standards for video archiving as set by the International Association of Sound and Audiovisual Archives <a href="https://www.iasa-web.org/">(IASA)</a>.</em></p> <h3 id="define-encoding-settings---making-an-encoding-preset"> <a href="#define-encoding-settings---making-an-encoding-preset" class="anchor-heading" aria-labelledby="define-encoding-settings---making-an-encoding-preset"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Define Encoding Settings - Making an Encoding Preset </h3> <p>The first thing we need to do is select the settings that we can use each time we want to create a lossless J2K .MXF video. To do this, we need to create an Encoding Preset. Go to the top Media Encoder CC menu to ‚ÄúPresets‚Äù and then select ‚ÄúCreate Encoding Preset‚Äù. A new Preset window will open up. Look at the image below to see the settings you should choose. Each will be explained below.</p> <p align="center"> <img width="500" src="images/presets-video.jpg" alt="Screenshot of Adobe Media Encoder video presets window" /> </p> <h3 id="preset-name-and-format"> <a href="#preset-name-and-format" class="anchor-heading" aria-labelledby="preset-name-and-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Preset name and format </h3> <p>First you should give the preset a meaningful name, I have chosen <strong>Lossless J2k (8-bit)</strong>. The main reason for this particular name is to differentiate this preset from others you might use for different workflows (I will discus why I add the distinction <strong>8-bit</strong> below).</p> <p>For the format, select <strong>JPEG 2000 MXF OP1a</strong>. Once you select this format, you are then offered these choices for the <em>Based on Preset</em> field:</p> <p align="center"> <img width="500" src="images/chroma_depth.png" alt="Chroma depth default options" /> </p> <p>You can leave the new default of <strong>RGBA 4:4:4:4 12-bit (BCs@L5)</strong>. This value will change once we make further refinements in our settings.</p> <p>Leave the remaining settings in this section as their defaults (<em>Comments</em> field left blank, <em>Export Video</em> and <em>Export Audio</em> boxes ticked).</p> <h3 id="video-settings"> <a href="#video-settings" class="anchor-heading" aria-labelledby="video-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Video settings </h3> <p>Edit only settings in the Video and Audio tabs. Settings in the other tabs (Effects, Captions, Publish) should be left untouched.</p> <p>Because we selected the <strong>JPEG 2000 MXF OP1a</strong> format above, the video codec will automatically be set to <strong>JPEG 2000</strong> in this section. The basic video settings options will have changed to those appropriate for this format.</p> <p>Make certain <strong>Match Source</strong> is selected, this will automatically tick all the boxes below (if they are not already), retaining the same settings as those of the original file for the following fields <em>Width</em>, <em>Height</em>, <em>Frame Rate</em>, <em>Field Order</em>, and <em>Aspect [ratio]</em>.</p> <p><em>Chroma</em> should be set to <strong>YUV 4:2:2</strong> with a <em>depth</em> of <strong>8-bit</strong>. In the rare case your original video has a colour depth of 10-bit, select the <strong>10-bit</strong> option. To determine the bit depth of a video, use <a href="https://mediaarea.net/en/MediaInfo">MediaInfo</a>; the file‚Äôs bit depth is listed in the MediaInfo metadata output report.</p> <blockquote> <p><strong>Note:</strong> If you are using CC2018: Set the Broadcast Profile to Level 6 (Lossless). This determines the maximum sampling and bit rates for the output file. You can see all the drop down choices offered below:</p> </blockquote> <p align="center"> <img width="500" src="images/broadcast_profile.png" alt="Broadcast profile settings from Adobe Media Encoder 2018" /> </p> <blockquote> <p><strong>Note:</strong> If you are using CC2020: You need only tick the box for <em>Lossless Compression</em>; The <em>Maximum Bitrate</em> and <em>Broadcast Profile</em> automatically get set to <strong>100,000 Mbps</strong> and <strong>Level 7 - 3200Mbps or Lossless</strong>, respectively</p> </blockquote> <p align="center"> <img width="500" src="images/broadcast_profile_CC2020.png" alt="Broadcast profile settings from Adobe Media Encoder 2020" /> </p> <h3 id="audio-settings"> <a href="#audio-settings" class="anchor-heading" aria-labelledby="audio-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Audio settings </h3> <p>There are not many adjustments that need to be made to the audio settings (see image below). The <em>Audio Codec</em> will already be set to <strong>Uncompressed</strong> with a <em>Sample Rate</em> of <strong>48,000 Hz</strong>. due to the choice of the video format of <strong>JPEG 2000 MXF OP1a</strong>.</p> <p align="center"> <img width="500" src="images/presets-audio.jpg" alt="Audio preset tab" /> </p> <p>Make certain the <em>Channels</em> field is set to <strong>2</strong>. If you are given a video that has been recorded with surround sound, there could be as many as 6 channels. Our standard is to have 2 channel stereo audio output for our .MXF files. 6 channel video files have caused problems for editing/playback in programs such as Adobe Premiere, etc. Then Set the <em>Sample Size</em> to <strong>24 bit</strong>.</p> <h3 id="the-remaining-settings"> <a href="#the-remaining-settings" class="anchor-heading" aria-labelledby="the-remaining-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The remaining settings </h3> <p>The remaining settings located underneath the tab area should all be left with the default settings (see image below). This means that the following boxes should all be left unticked: <em>Use Maximum Render Quality</em>, <em>Use Previews</em>, <em>Set Start Timecode</em>, and <em>Render Alpha Channel Only</em>.</p> <p align="center"> <img width="500" src="images/presets-extras.jpg" alt="Remaining miscellaneous settings" /> </p> <p>Leave the <em>Time Interpolation</em> set to <strong>Frame Sampling</strong>. This settings handles motion smoothing if you change the output file‚Äôs frames per second.</p> <h3 id="using-mediainfo-to-check-your-output-file-metadata"> <a href="#using-mediainfo-to-check-your-output-file-metadata" class="anchor-heading" aria-labelledby="using-mediainfo-to-check-your-output-file-metadata"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using MediaInfo to check your output file metadata </h3> <p>MediaInfo is the best method to access all of the file specifications you need in order to understand the structure of your media files. You should know the underlying specifications of your original file before you do any transcoding. This ensures that you are able to set your output settings to match the relevant specs of the original. Below is a side-by-side comparison of the MediaInfo outputs, with added red asterisks to highlight some of the specs to be aware of:</p> <p align="center"> <img width="800" src="images/MediaInfo-MTS_MXF.jpg" alt="Side-by-side comparison of MediaInfo screenshots for .MTS and .MXF video files" /> </p> <p>I have pulled out some of those specs for comparison in the table below. You will be creating a video that has an increased <strong><em>file size</em></strong> from the original; this is because the <strong><em>bitrate</em></strong> will have increased substantially due to the transcoding process for lossless .MXF. The <strong><em>durations</em></strong> need to be similar (within +/- 500ms). Unless you clear any changes in specifications with the depositor first, you will need to keep the following specs the same: <strong><em>aspect ratio</em></strong>, <strong><em>frame rate</em></strong>, <strong><em>color space</em></strong>, and <strong><em>bit depth</em></strong>. The <strong><em>audio channels</em></strong> may change from the original; an original video with six audio channels (surround sound) is problematic in Adobe. If the depositor requires the six channels to remain, this workflow will not handle it. Another one will need to be configured.</p> <p>Finally, the <strong><em>compression mode</em></strong> for the .MXF <strong>MUST</strong> indicate it is <strong><em>lossless</em></strong>. If it is not lossless, you need to look at your settings and try again.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">SPECIFICATION</th> <th style="text-align: left">ORIGINAL .MTS</th> <th style="text-align: left">ARCHIVAL .MXF</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong><em>Name</em></strong></td> <td style="text-align: left">00050.mts</td> <td style="text-align: left">0005.mxf</td> </tr> <tr> <td style="text-align: left"><strong><em>Format</em></strong></td> <td style="text-align: left">BDAV</td> <td style="text-align: left">MXF</td> </tr> <tr> <td style="text-align: left"><strong><em>Format profile</em></strong></td> <td style="text-align: left">Blu-Ray Video</td> <td style="text-align: left">OP-1a v1.2</td> </tr> <tr> <td style="text-align: left"><strong><em>File size</em></strong></td> <td style="text-align: left">31.5 MiB</td> <td style="text-align: left">785 MiB</td> </tr> <tr> <td style="text-align: left"><strong><em>Duration</em></strong></td> <td style="text-align: left">37 s 350 ms</td> <td style="text-align: left">37 s 440 ms</td> </tr> <tr> <td style="text-align: left"><strong><em>(Max.) Overall bitrate</em></strong></td> <td style="text-align: left">13.7 Mb/s</td> <td style="text-align: left">176 Mb/s</td> </tr> <tr> <td style="text-align: left"><strong><em>Aspect ratio</em></strong></td> <td style="text-align: left">16:9</td> <td style="text-align: left">16:9</td> </tr> <tr> <td style="text-align: left"><strong><em>Frame rate</em></strong></td> <td style="text-align: left">25 fps</td> <td style="text-align: left">25 fps</td> </tr> <tr> <td style="text-align: left"><strong><em>Color space</em></strong></td> <td style="text-align: left">YUV</td> <td style="text-align: left">YUV</td> </tr> <tr> <td style="text-align: left"><strong><em>Chroma subsampling</em></strong></td> <td style="text-align: left">4:2:0</td> <td style="text-align: left">4:2:2</td> </tr> <tr> <td style="text-align: left"><strong><em>Bit depth</em></strong></td> <td style="text-align: left">8 bits</td> <td style="text-align: left">8 bits</td> </tr> <tr> <td style="text-align: left"><strong><em>Compression mode</em></strong></td> <td style="text-align: left">n/a</td> <td style="text-align: left"><strong>LOSSLESS</strong></td> </tr> <tr> <td style="text-align: left"><strong><em>Audio channels</em></strong></td> <td style="text-align: left">2</td> <td style="text-align: left">2</td> </tr> <tr> <td style="text-align: left"><strong><em>Sampling rate</em></strong></td> <td style="text-align: left">48 kHz</td> <td style="text-align: left">48 kHz</td> </tr> </tbody> </table></div> <p>Once you transcode the original file to an .MXF, you will need to take a look at the .MXF file metadata to determine whether or not you have created an appropriate match to the original.</p> <blockquote> <p><strong>Note:</strong> You can do this in batches, as MediaInfo allows you to open multiple files at one time. On a Mac, you get one MediaInfo window with a dropdown menu to select which file you want to see in the active report; on Windows, separate MediaInfo windows will open for each file selected.</p> </blockquote> <h3 id="using-an-mxf-player-to-check-the-quality-of-your-newly-created-file"> <a href="#using-an-mxf-player-to-check-the-quality-of-your-newly-created-file" class="anchor-heading" aria-labelledby="using-an-mxf-player-to-check-the-quality-of-your-newly-created-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using an MXF player to check the quality of your newly created file </h3> <p>Once you have checked the file metadata with MediaInfo, you will need to play through the entire video to see if there were any issues in your transcoding process. I have created a lossless .MXF that had playback issues, so this step in the quality checking process in very important. Unfortunately, there are not many players that can handle .MXF-formatted video. You need to find a player that lets you see if there is jumpy playback, dropped frames, or any other errors.</p> <blockquote> <p><strong>Note:</strong> VLC can open and play .MXF files, but the playback is always jumpy, so you cannot determine if it is the player or your transcoding that is the source of the jumpy playback. This is not acceptable for our workflow.</p> </blockquote> <p>I suggest using Telestream‚Äôs <a href="http://www.telestream.net/switch/overview.htm">Switch player</a>. You can get a free trial, but the price for the basic player is under AU$15. With the basic license, the viewer will show the Switch watermark in the upper right corner of the video during playback of .MXF files, but this has no bearing on its functionality for our task, playback. Switch is not to be used in any transcoding or editing capacity.</p> <p align="center"> <img width="500" src="images/Switch-mxf.png" alt="Screenshot of Telestrea's Switch media player" /> </p> <p>You can see in the upper left corner that there is some quality reporting. Pay special attention to the dropped frames. If there are any dropped frames, you will need to re-transcode the file.</p> <blockquote> <p><strong>Note:</strong> If you are running other memory hungry programs in the background when you are trying to preview your .MXF with Switch, you will very likely have a report of dropped frames. You should quit all other processes while you are doing your playback reviews.</p> </blockquote><hr /> <h3 id="explanation-of-the-specifications-used-to-create-lossless-mxf"> <a href="#explanation-of-the-specifications-used-to-create-lossless-mxf" class="anchor-heading" aria-labelledby="explanation-of-the-specifications-used-to-create-lossless-mxf"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Explanation of the Specifications used to create lossless MXF </h3> <ul> <li> <p><strong>JPEG 2000 MXF OP1a</strong> is the MXF (Material Exchage Format) Operational Pattern 1a (OP1a), with lossles JPEG 2000 in a generic container <em>(for more information see the Federal Agencies Digital Guidelines Initiative <a href="http://www.digitizationguidelines.gov/guidelines/MXF_app_spec.html">FADGI</a>)</em></p> </li> <li> <p><strong>YUV 4:2:2</strong> with a depth of <strong>8 bit</strong> is the <em>Chroma Subsampling</em> suggested by IASA for born-digital .MXF. <strong>Y</strong> (or often <strong>Y‚Ä≤</strong>) stands for the <em>luma</em>, or <em>brightness</em>, <em>component</em>; <strong>U</strong> and <strong>V</strong> are the two <em>colour components</em>. YUV colour encoding takes into consideration human perception thus creating an output that has masked any human-noticable distortions <em>(for more information see <a href="https://en.wikipedia.org/wiki/YUV">YUV</a>)</em>.</p> </li> <li> <p><strong>4:2:2</strong> denotes the <em>vertical</em> and <em>horizontal subsampling</em> <em>(for more information read Charles Poynton‚Äôs work on Chroma subsampling <a href="https://poynton.ca/PDFs/Chroma_subsampling_notation.pdf">HERE</a>)</em>.</p> </li> <li> <p><strong>8-bits</strong> per channel is typically the <em>bit depth</em> for many of the original .MOV, .MTS, .AVI, .MP4, etc. video files we handle. Using a 10-bit depth would needlessly increase the file-size while adding no improved quality.</p> </li> <li> <p><strong>Broadcast profile</strong> determines the maximum sampling and bit rates of the output file. <strong>Level 6 lossless (L6)</strong> is 520 Msamples/s and 1600Mbits/s. <strong>Level 7 lossless (L7)</strong> is 520 Msamples /s and and unspecified Max Bitrate.</p> </li> <li> <p>For further information of the <strong>Media Encoder export settings</strong> mentioned above look <a href="https://helpx.adobe.com/au/media-encoder/using/export-settings-reference.html">HERE</a>.</p> </li> </ul> <p><a href="https://paradisec-archive.github.io/video_processing-MXF/">Return to top of page</a></p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
